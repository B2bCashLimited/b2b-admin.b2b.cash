<div class="loading-shade"
     *ngIf="isLoading">
  <mat-spinner></mat-spinner>
</div>

<div class="row mb-2">
  <div class="col-12">
    <div class="d-flex">
      <a class="d-inline-flex align-items-center e-back"
         routerLink="/documents/list"
         [queryParams]="queryParams">
        <i class="material-icons pr-2 color-orange">undo</i>
      </a>
      <h5 class="title-h2">{{isAct ? 'Акт' : 'Счёт/Инвойс'}}</h5>
    </div>
  </div>
</div>

<div *ngIf="!isLoading && isAct"
     class="b-act mb-4 b-act--edit"
     [formGroup]="formGroup">
  <div class="b-act--title pt-2">АКТ №&nbsp;{{invoice?.id}} от {{invoice?.dateCreated?.date | date: 'dd.MM.yy'}}</div>
  <div class="b-act--title mb-3">на выполнение работ-услуг</div>

  <div class="b-act--subtitle">
    <div class="e-textarea height-1">
      <textarea class="w-100"
                disabled
                readonly>
        Мы, нижеподписавшиеся, ### ИСПОЛНИТЕЛЬ с одной стороны и ### ЗАКАЗЧИК с другой стороны, составили настоящий акт о том, что
      ИСПОЛНИТЕЛЬ выполнил, а ЗАКАЗЧИК принял следующие работы:
      </textarea>
    </div>
  </div>

  <table class="b-act--table w-100 mb-3">
    <tr>
      <th>Наименование</th>
      <th>Ед. изм.</th>
      <th>Кол-во</th>
      <th>Цена</th>
      <th>Сумма</th>
    </tr>
    <tr>
      <td class="font-weight-bold">1</td>
      <td class="font-weight-bold">2</td>
      <td class="font-weight-bold">3</td>
      <td class="font-weight-bold">4</td>
      <td class="font-weight-bold">5</td>
    </tr>
    <tr>
      <td class="p-0">Наименование</td>
      <td>месяц</td>
      <td>1</td>
      <td>{{formGroup.get('price').value || 0}}</td>
      <td>{{formGroup.get('price').value || 0}}</td>
    </tr>
    <tr>
      <td class="text-left"
          colspan="4">Итого:
      </td>
      <td>{{formGroup.get('price').value || 0}}</td>
    </tr>
  </table>

  <div class="b-act--text mb-3">
    <div class="e-textarea height-1">
      <textarea class="w-100"
                disabled
                readonly>
        Сумма прописью:

      Работы выполнены в полном объеме, в установленные сроки и с надлежащим качеством. Стороны предензий друг
      к другу не имеют.
      </textarea>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-6">
      <div class="b-act--text mb-1">Исполнитель:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('companyName').value}}</span>
      </div>
      <div class="b-act--text mb-1">Адрес:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('companyAddress').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ИНН:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('inn').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">КПП:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('kpp').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ОГРН:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('ogrn').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ЕГРЮЛ:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('egryul').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Код ОКТМО:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('oktmo').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Код ОКВЕД:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('okved').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер бизнес лицензии:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('businessLicense').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер карты юридического лица:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('identityCard').value}}</span>
      </div>
      <div class="b-act--text mb-1">{{isRussia ? 'Банк' : 'Главный банк'}}:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bankName').value}}</span>
      </div>
      <div class="b-act--text mb-1">Адрес банка:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bankAddress').value}}</span>
      </div>
      <div class="b-act--text mb-1">{{isRussia ? 'Расчетный счет' : 'Номер счёта'}}:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bankAccountNumber').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">SWIFT:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bankSwift').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ИНН/КПП банка:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bankInn').value}}/{{formGroup.get('bankKpp').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Корр.счет:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('correspondentAccountNumber').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text pb-4 mb-4">БИК:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('bik').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Банк корреспондент:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('intermediaryBankName').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Адрес банка:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('intermediaryBankAddress').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер счёта:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('intermediaryBankAccountNumber').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text pb-4 mb-1">SWIFT:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('intermediaryBankSwift').value}}</span>
      </div>
      <div class="d-flex b-act--text align-items-end b-signature mt-5 mb-2">
        Сдал
        <div class="bottom-line ml-2">
          <img alt=""
               [src]="serverUrl + formGroup.get('imgSign').value">
        </div>
        <span class="pl-4">{{formGroup.get('ceo').value}}</span>
      </div>
      <div class="b-stamp d-flex justify-content-end">
        <img alt=""
             [src]="serverUrl + formGroup.get('imgStamp').value">
      </div>
    </div>

    <div class="col-6">
      <div class="b-act--text mb-1">Заказчик:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get(isRussia ? 'nameRu' : 'nameEn').value}}</span>
      </div>
      <div class="b-act--text mb-1">Адрес:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('address').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ИНН:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('taxLicense').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">КПП:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('letterConsignment').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ОГРН:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('businesLicense').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ЕГРЮЛ:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('identicalCard').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Код ОКТМО:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('certificateOrganizationCode').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Код ОКВЕД:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('registracionVED').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер бизнес лицензии:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('businesLicense').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер карты юридического лица:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('identicalCard').value}}</span>
      </div>
      <div class="b-act--text mb-1">{{isRussia ? 'Банк' : 'Главный банк'}}:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerBankName').value}}</span>
      </div>
      <div class="b-act--text mb-1">Адрес банка:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerBankAddress').value}}</span>
      </div>
      <div class="b-act--text mb-1">{{isRussia ? 'Расчетный счет' : 'Номер счёта'}}:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('RS').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">SWIFT:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerBankSwift').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">ИНН/КПП банка:&nbsp;
        <span class="pl-1 font-weight-bold">
          {{formGroup.get('IIN').value}}
          <span *ngIf="formGroup.get('IIN').value && formGroup.get('customerBankKpp').value">/</span>
          {{formGroup.get('customerBankKpp').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text mb-1">Корр.счет:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('accountHolder').value}}</span>
      </div>
      <div *ngIf="isRussia"
           class="b-act--text pb-4 mb-4">БИК:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('BIK').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Банк корреспондент:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerIntermediaryBankName').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Адрес банка:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerIntermediaryBankAddress').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text mb-1">Номер счёта:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerIntermediaryBankAccountNumber').value}}</span>
      </div>
      <div *ngIf="!isRussia"
           class="b-act--text pb-4 mb-1">SWIFT:&nbsp;
        <span class="pl-1 font-weight-bold">{{formGroup.get('customerIntermediaryBankSwift').value}}</span>
      </div>

      <div class="d-flex b-act--text align-items-end b-signature mt-5 mb-2">
        <span>Сдал&nbsp;</span>
        <div class="bottom-line"></div>
        <span class="pl-4">Генеральный директор</span>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!isLoading && isInvoice"
     class="b-act mb-4 b-act--edit"
     [formGroup]="formGroup">
  <table *ngIf="isRussia"
         class="b-act--table w-100 mb-3 table-score">
    <tr>
      <td rowspan="2"
          colspan="2"
          style="border-bottom: 0;">{{formGroup.get('bankName').value || 'Название банка'}}</td>
      <td style="width: 10%">БИК</td>
      <td style="width: 40%; border-bottom: 0;">{{formGroup.get('bik').value}}</td>
    </tr>
    <tr>
      <td>Расч. счёт</td>
      <td style="border-top: 0; border-bottom: 0;">{{formGroup.get('bankAccountNumber').value}}</td>
    </tr>
    <tr>
      <td colspan="2"
          style="border-top: 0;">Банк получателя
      </td>
      <td>Корр. счёт</td>
      <td style="border-top: 0;">{{formGroup.get('correspondentAccountNumber').value}}</td>
    </tr>
    <tr>
      <td>ИНН {{formGroup.get('bankInn').value}}</td>
      <td>КПП {{formGroup.get('bankKpp').value}}</td>
      <td style="border: 0;"></td>
      <td rowspan="3"
          style="border: 0;"></td>
    </tr>
    <tr>
      <td colspan="2"
          style="border-bottom: 0;">{{formGroup.get('companyName').value || 'Название компании'}}</td>
      <td style="border: 0;"></td>
    </tr>
    <tr>
      <td colspan="2"
          style="border-top: 0;">Получатель
      </td>
      <td style="border: 0;"></td>
    </tr>
  </table>

  <table *ngIf="!isRussia"
         class="b-act--table w-100 mb-3 table-score">
    <tr>
      <td rowspan="2"
          colspan="2"
          style="border: 0; width: 45%;">{{formGroup.get('bankName').value || 'Name'}}</td>
      <td style="width: 15%;">IBAN</td>
      <td style="border: 0;">{{formGroup.get('bankAccountNumber').value}}</td>
    </tr>
    <tr>
      <td>SWIFT</td>
      <td style="border: 0;">{{formGroup.get('bankSwift').value}}</td>
    </tr>
    <tr>
      <td colspan="2"
          style="border: 0;">Main Bank
      </td>
      <td>Bank address</td>
      <td>{{formGroup.get('bankAddress').value}}</td>
    </tr>
    <tr>
      <td rowspan="2"
          colspan="2"
          style="border-bottom: 0;">{{formGroup.get('intermediaryBankName').value || 'Name'}}</td>
      <td>IBAN</td>
      <td style="border: 0;">{{formGroup.get('intermediaryBankAccountNumber').value}}</td>
    </tr>
    <tr>
      <td>SWIFT</td>
      <td style="border: 0;">{{formGroup.get('intermediaryBankSwift').value}}</td>
    </tr>
    <tr>
      <td colspan="2"
          style="border: 0;">Intermediary Bank
      </td>
      <td>Bank address</td>
      <td>{{formGroup.get('intermediaryBankAddress').value}}</td>
    </tr>
    <tr>
      <td>Business License {{formGroup.get('businessLicense').value}}</td>
      <td>Identification card {{formGroup.get('identityCard').value}}</td>
      <td colspan="2"
          style="border-bottom: 0;"></td>
    </tr>
    <tr>
      <td colspan="2"
          style="border-bottom: 0;">{{formGroup.get('companyName').value || 'Company name'}}</td>
      <td rowspan="2"
          colspan="2"
          style="border: 0;"></td>
    </tr>
    <tr>
      <td colspan="2"
          style="border-top: 0;">Recipient
      </td>
    </tr>
  </table>

  <div class="fz-15 py-3 mb-4 font-weight-bold bottom-2">
    <span>{{isRussia ? 'Счет на оплату' : 'Invoice'}} №</span>
    <span>{{invoice?.id}}</span>
    <span>{{isRussia ? ' от ' : ' from '}}</span>
    <span>{{invoice?.dateCreated?.date | date:'dd.MM.yyyy'}}</span>
  </div>

  <table class="fz-12 w-100 mb-3">
    <tr>
      <td class="pb-3">{{isRussia ? 'Поставщик' : 'Supplier'}}</td>
      <td>
        <div class="e-textarea height-1">
          <textarea class="w-100 font-weight-bold"
                    disabled
                    readonly>
            ООО "Б2Б.КЕШ ЛИМИТЕД", ИНН 7726432476, КПП 772601001, 117519, г.Москва, Варшавское шоссе, дом №133, офис 2-380, тел.: 8 (958) 756 87 77
          </textarea>
        </div>
      </td>
    </tr>

    <tr>
      <td class="pb-3">{{isRussia ? 'Получатель' : 'Customer'}}</td>
      <td class="font-weight-bold pb-3">
        {{formGroup.get('companyName').value || (isRussia ? 'Название компании ' : 'Company name ')}},
        {{isRussia ? 'ИНН ' : 'Business License '}}
        {{isRussia ? formGroup.get('inn').value : formGroup.get('businessLicense').value}},
        {{isRussia ? ' КПП ' : ' Identification card '}}
        {{isRussia ? formGroup.get('kpp').value : formGroup.get('identityCard').value}},
        {{formGroup.get('companyAddress').value || (isRussia ? ' Адрес компании ' : ' Company address ')}},
        {{isRussia ? 'тел.' : 'phone'}}: 8 (999) 999 99 99
      </td>
    </tr>

    <tr>
      <td class="pb-3">{{isRussia ? 'Договор' : 'Contract'}}:</td>
      <td class="font-weight-bold pb-3">{{isRussia ? ' от ' : ' from '}}</td>
    </tr>

    <tr>
      <td class="pb-3">{{isRussia ? 'Отчетный период' : 'Reporting period'}}:</td>
      <td class="font-weight-bold pb-3"></td>
    </tr>
  </table>

  <table class="b-act--table w-100 mb-3">
    <tr>
      <th>№</th>
      <th>{{isRussia ? 'Наименование' : 'Name'}}</th>
      <th>{{isRussia ? 'Кол-во' : 'Amount'}}</th>
      <th>{{isRussia ? 'Ед.' : 'Unit'}}</th>
      <th>{{isRussia ? 'Цена' : 'Price'}}</th>
      <th>{{isRussia ? 'Сумма' : 'Total sum'}}</th>
    </tr>

    <tr>
      <td>1</td>
      <td class="p-0">Наименование</td>
      <td>1</td>
      <td>{{isRussia ? 'услуга' : 'service'}}</td>
      <td>{{formGroup.get('price').value || 0}}</td>
      <td>{{formGroup.get('price').value || 0}}</td>
    </tr>
  </table>

  <table class="fz-12 font-weight-bold ml-auto mb-4">
    <tr>
      <td>{{isRussia ? 'Итого' : 'Sum'}}:</td>
      <td class="pl-3">{{formGroup.get('price').value || 0}}</td>
    </tr>
    <tr>
      <td>{{isRussia ? 'Всего к оплате' : 'Total sum'}}:</td>
      <td class="pl-3">{{formGroup.get('price').value || 0}}</td>
    </tr>
  </table>

  <div class="fz-12 mb-2">
    {{isRussia ? 'Всего наименований 1, на сумму ' : 'Total items 1, in the amount of '}}
    {{formGroup.get('price').value || 0}} {{currency}}
  </div>

  <div class="e-textarea height-3 pb-2 mb-5 bottom-2">
    <textarea class="w-100 fz-12 font-weight-bold"
              disabled
              readonly>Сумма прописью: </textarea>
  </div>

  <div class="row mb-5">
    <div class="col-6 mb-3">
      <div class="d-flex b-act--text d-flex align-items-end b-signature mb-2 ">
        <div>{{isRussia ? 'Генеральный директор' : 'CEO'}}</div>

        <div class="bottom-line ml-2 mr-2">
          <img alt=""
               [src]="serverUrl + formGroup.get('imgSign').value">
        </div>

        <div>{{formGroup.get('ceo').value}}</div>
      </div>

      <div class="b-stamp d-flex justify-content-end">
        <img alt=""
             [src]="serverUrl + formGroup.get('imgStamp').value">
      </div>
    </div>

    <div class="col-6 mb-3">
      <div class="d-flex b-act--text d-flex align-items-end b-signature mb-2 ">
        <div class="bottom-line ml-2 mr-2"></div>
      </div>
    </div>
  </div>

  <div class="e-textarea height-1 mb-2">
      <textarea class="w-100 fz-12 font-weight-bold"
                disabled
                readonly>
        Внимание!
        1. Оплата должна производиться до 13 (Тринадцатого) числа месяца, предшествующего отчётному периоду.
        2. Если в платёжном поручении не будет указан договор и счёт, оплата может быть отнесена в нераспознанные платежи.
      </textarea>
  </div>
</div>
